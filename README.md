# Сервис сегментирования пользователей

Сервис, который позволяет добавлять, удалять, изменять и распределять сегменты между пользователями. Предназначен для управления сегментами аудитории и позволяет автоматически распределять пользователей по сегментам.

## Описание проекта

Проект представляет собой REST API сервис на Go с использованием фреймворка Echo и базы данных PostgreSQL. Сервис позволяет:

- Создавать и удалять сегменты
- Добавлять и удалять пользователей в сегменты
- Автоматически распределять сегменты между пользователями по процентам
- Просматривать списки пользователей и их сегментов

## Технологии

- Go
- PostgreSQL
- Echo Framework
- Docker & Docker Compose
- Swagger для документации API

## API Endpoints

### Сегменты

- `GET /segments` - Получение списка всех сегментов
- `POST /segments/{segment}` - Создание нового сегмента
- `PUT /segments/{segment}?percentage={value}` - Распределение сегмента среди пользователей (процент от 0 до 100)
- `DELETE /segments/{segment}` - Удаление сегмента

### Пользователи

- `GET /users` - Получение всех пользователей и их сегментов
- `GET /users/{id}` - Получение сегментов конкретного пользователя
- `PUT /users/{id}/{segment}` - Добавление сегмента пользователю
- `DELETE /users/{id}/{segment}` - Удаление сегмента у пользователя
- `DELETE /users/{id}` - Очистка всех сегментов пользователя

### Swagger

- `GET /swagger/*` - Документация Swagger

## Настройка и запуск

### Конфигурация

1. Скопируйте файл `.env.example` в `.env`

2. Настройте переменные окружения в файле `.env`

### Запуск через Docker

1. Соберите и запустите контейнеры:
   ```bash
   docker-compose up -d
   ```

2. Сервис будет доступен по адресу `http://localhost:8080`

3. Документация API Swagger будет доступна по адресу `http://localhost:8080/swagger/index.html`
